<head>
    <script type="text/javascript" src="crafty.js"></script>
    <title>My Crafty Game</title>
    <style>
	@font-face { font-family: "Amiga"; src: url('amiga4ever.ttf') format("truetype");}
    body, html { margin:0; padding: 0; overflow:hidden;font-family: "Amiga"; font-size:1.0em; text-transform: uppercase;}
    #cr-stage { border:2px solid black; margin:5px auto; color:white }
	

    </style>
</head>
<body>
	<script>
		window.onload = function () {
			//start crafty
			var size_x=608;
			var size_y=480;
			//Array for the configuration
			
			var config_text = new Array ("wins needed","players","shop", "shrinking",
				"fastingnition", "startmoney", "normallevel", "gambling");
			var config_value = new Array (3,2,'on','off','on','off','yes','yes');
			var cofig_limits = new Array (1,9,2,5);
			var active_position=0;
			
			function toggle(value){
				if (value=='yes')
				{
					value='no';
				}else if(value=='no')
				{
					value='yes';
				}else if(value=='on')
				{
					value='off';
				}
				else if(value=='off')
				{
					value='on';
				}
				return value;
			}
			
			Crafty.init(size_x, size_y);
			
			Crafty.sprite(32, "countdown.png", {
				countdown: [0, 3]
			});
						
			Crafty.scene("loading", function () {
				//load takes an array of assets and a callback when complete
				Crafty.load(["sprite_players.png"], function () {
					//Crafty.scene("logo"); //when everything is loaded, run the main scene
					Crafty.scene("menu");
				});
				//black background with some loading text
			});
			
			Crafty.scene("menu", function () {
				var y_zeile=1;
				var pfeil="";
				Crafty.background("#000");
				for(var i=0;i<config_text.length; i++) {
					if (y_zeile == 1)
					{
						Crafty.e("2D, DOM, Text")
							.attr({ w: 400, h: 20, x: 100, y: 35*y_zeile})
							.textColor('#FFFF00')
							.text("main menu")
							.css({"text-align":"center"});
							
						y_zeile++;
						
						Crafty.e("2D, DOM, Text")
							.attr({ w: 400, h: 20, x: 100, y: 35*y_zeile})
							.textColor('#FFFF00')
							.text("---------")
							.css({ "text-align":"center" });
							
						y_zeile++;
					}
					if (active_position===i) 
					{
						//pfeil für die aktive position
						Crafty.e("2D, DOM, Text")
							.attr({ w: 400, h: 20, x: 80, y: 35*(y_zeile)})
							.textColor('#FFFFBB')
							.text(" > ")
							.css({"text-align":"left"});
					};
					//Configurationstext
					Crafty.e("2D, DOM, Text")
						.attr({ w: 350, h: 20, x: 150, y: 35*y_zeile})
						.textColor('#FFFF00')
						.text(config_text[i])
						.css({"text-align":"left"});
						
					//Configurationsinhalt	
					Crafty.e("2D, DOM, Text")
						.attr({ w: 400, h: 20, x: 380, y: 35*y_zeile})
						.textColor('#FFFF00')
						.text(": " + config_value[i])
						.css({"text-align":"left"})
						.bind("KeyDown",function(e){
							if(e.key === Crafty.keys.LEFT_ARROW){
								//Crafty.scene("menu");
								if (active_position > 1)
								{
									config_value[active_position] = toggle(config_value[active_position]);
								}else{
									config_value[active_position]--;
								}
								//config_value[active_position]--;
								Crafty.scene("menu");
							};
							if(e.key === Crafty.keys.RIGHT_ARROW){
								//Crafty.scene("menu");
								if (active_position > 1)
								{
									config_value[active_position] = toggle(config_value[active_position]);
								}else{
									config_value[active_position]++;
								}
								Crafty.scene("menu");
								//alert(config[]);
							};
							if(e.key === Crafty.keys.UP_ARROW){
								if (active_position >0)
								{
									active_position--;
								}
								
								Crafty.scene("menu");
							};
							if(e.key === Crafty.keys.DOWN_ARROW){
								if (active_position <config_text.length-1)
								{
									active_position++;
								}
								
								Crafty.scene("menu");
								//active_config=;
								//Crafty.scene("menu");
							};
						});
					
					y_zeile++;
				}
				/*	.bind("KeyDown",function(e){
						if(e.key === Crafty.keys.SPACE){
							Crafty.scene("credits");
						};
					});*/
			});
			
			Crafty.scene("loading");
		};
	</script>
</body>
</html>